// CookieClip.tsx
import React from 'react';
import { Svg, Path, Defs, ClipPath, Image as SvgImage } from 'react-native-svg';

const COOKIE_D =
  'M126.828 14.2757C128.574 12.8498 129.448 12.1369 130.245 11.5351C149.03 -2.64515 174.97 -2.64515 193.755 11.5351C194.552 12.1369 195.425 12.8498 197.172 14.2757C197.952 14.9121 198.342 15.2304 198.727 15.5333C207.567 22.4788 218.406 26.4148 229.652 26.7636C230.143 26.7788 230.647 26.7851 231.654 26.7976C233.911 26.8255 235.039 26.8395 236.037 26.8898C259.563 28.0742 279.435 44.7107 284.689 67.6205C284.912 68.5929 285.121 69.6991 285.541 71.9115C285.728 72.8992 285.822 73.393 285.922 73.8723C288.219 84.8623 293.986 94.8285 302.377 102.308C302.743 102.635 303.125 102.963 303.888 103.618C305.599 105.087 306.454 105.821 307.187 106.5C324.445 122.495 328.95 147.983 318.215 168.903C317.76 169.791 317.208 170.773 316.104 172.737C315.611 173.613 315.364 174.052 315.132 174.483C309.812 184.375 307.809 195.708 309.418 206.82C309.488 207.304 309.569 207.8 309.732 208.792C310.096 211.014 310.278 212.125 310.402 213.115C313.318 236.436 300.347 258.851 278.647 267.992C277.726 268.379 276.67 268.778 274.559 269.574C273.617 269.929 273.146 270.107 272.69 270.289C262.241 274.455 253.406 281.852 247.48 291.395C247.221 291.811 246.964 292.243 246.449 293.108C245.297 295.043 244.721 296.011 244.178 296.849C231.387 316.584 207.011 325.436 184.498 318.521C183.543 318.228 182.477 317.856 180.347 317.112C179.396 316.78 178.921 316.614 178.455 316.461C167.767 312.951 156.233 312.951 145.545 316.461C145.079 316.614 144.603 316.78 143.652 317.112C141.522 317.856 140.457 318.228 139.502 318.521C116.989 325.436 92.6128 316.584 79.8221 296.849C79.2792 296.011 78.7029 295.043 77.5503 293.108C77.0358 292.243 76.7785 291.811 76.52 291.395C70.5939 281.852 61.7583 274.455 51.3096 270.289C50.8539 270.107 50.3827 269.929 49.4404 269.574C47.3294 268.778 46.274 268.379 45.3529 267.992C23.6523 258.851 10.6819 236.436 13.598 213.115C13.7218 212.125 13.9039 211.014 14.2682 208.792C14.4308 207.8 14.5121 207.304 14.5822 206.82C16.1908 195.708 14.188 184.375 8.86748 174.483C8.63542 174.052 8.389 173.613 7.89616 172.737C6.79213 170.773 6.24011 169.791 5.78449 168.903C-4.95014 147.983 -0.445588 122.495 16.8128 106.5C17.5454 105.821 18.4007 105.087 20.1113 103.618C20.875 102.963 21.2568 102.635 21.6228 102.308C30.0134 94.8285 35.7804 84.8623 38.0777 73.8723C38.1779 73.393 38.2715 72.8992 38.4588 71.9115C38.8783 69.6991 39.088 68.5928 39.311 67.6205C44.5652 44.7107 64.4369 28.0742 87.9623 26.8898C88.9608 26.8395 90.0891 26.8255 92.3458 26.7976C93.3531 26.7851 93.8568 26.7788 94.3473 26.7636C105.594 26.4148 116.432 22.4788 125.272 15.5333C125.658 15.2304 126.048 14.9121 126.828 14.2757Z';

type Props = {
  uri?: string; // remote
  source?: number; // require('local.png')
  width?: number; // in px
};

export const CookieClip = ({ uri, source, width = 324 }: Props) => {
  // Keep the cookie's original aspect ratio: 324 x 321
  const height = (321 / 324) * width;

  return (
    <Svg width={width} height={height} viewBox="0 0 324 321">
      <Defs>
        <ClipPath id="cookieClip">
          <Path d={COOKIE_D} />
        </ClipPath>
      </Defs>

      {/* Draw the image and clip it to the cookie shape */}
      <SvgImage
        x={0}
        y={0}
        width="100%"
        height="100%"
        preserveAspectRatio="xMidYMid slice"
        href={source ?? (uri ? { uri } : undefined)}
        clipPath="url(#cookieClip)"
      />
    </Svg>
  );
};
